(function(){"use strict";(()=>{let t=null;chrome.runtime.onMessage.addListener((e,o,n)=>(console.log("Background received message:",e),e.type==="GET_SELECTED_TEXT"?(console.log("Sending selected text:",t),n({text:(t==null?void 0:t.text)||null}),!0):e.type==="TEXT_SELECTED"?(console.log("Text selected:",e),t={text:e.text,timestamp:e.timestamp||new Date().toISOString()},chrome.runtime.sendMessage({type:"TEXT_AVAILABLE",text:t.text,timestamp:t.timestamp}).catch(r=>{r.message.includes("Could not establish connection")||console.error("Error broadcasting message:",r)}),n({success:!0}),!0):!1))})()})();
